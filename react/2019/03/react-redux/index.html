<!DOCTYPE html>

<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Cache-control" content="public">
		<meta name="msvalidate.01" content="1AAC6AB2F92622321577453EF16C7E43" />

		<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>React Redux with typescript | Kuros.in</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="React Redux with typescript" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this article we will focus on configuring redux, creating our first action, reducer &amp; store." />
<meta property="og:description" content="In this article we will focus on configuring redux, creating our first action, reducer &amp; store." />
<link rel="canonical" href="https://kuros.in/react/2019/03/react-redux/" />
<meta property="og:url" content="https://kuros.in/react/2019/03/react-redux/" />
<meta property="og:site_name" content="Kuros.in" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-03-18T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"In this article we will focus on configuring redux, creating our first action, reducer &amp; store.","@type":"BlogPosting","url":"https://kuros.in/react/2019/03/react-redux/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://kuros.in/siteicon.png"}},"headline":"React Redux with typescript","dateModified":"2019-03-18T00:00:00+00:00","datePublished":"2019-03-18T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://kuros.in/react/2019/03/react-redux/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

		<link type="application/atom+xml" rel="alternate" href="https://kuros.in/feed.xml" title="Kuros.in" />

		<link rel="apple-touch-icon" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" href="/touch-icon.png" sizes="192x192">
		<link rel="icon" type="image/png" href="/images/favicon.png">

		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300|Rubik:300">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="/css/screen.css">

		        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131802948-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-131802948-1');
        </script>
        
		
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-4166026699724584",
                enable_page_level_ads: true
            });
        </script>

	</head>

	<body>
		<header id="mainHeader">
			<div class="container">
				<div class="company-name">
					<a href="/">
						<!--<span class="dark-logo"><img width="104" height="38" src="/images/logo/dark.svg" alt="dark frisco logo"></span>-->
						<!--<span class="light-logo"><img width="104" height="38" src="/images/logo/light.svg" alt="light frisco logo"></span>-->
						<span class="dark-logo">Kuros.in</span>
						<span class="light-logo">Kuros.in</span>
					</a>
				</div>
				<nav>
	<a class="nav-toggle" id="open-nav" href="#">&#9776;</a>
	
		
		

		
		<a href="/random-jpa/" class="" >Random-JPA</a>
	
		
		

		
		<a href="/blog/" class="" >Blog</a>
	
		
		

		
		<a href="/about/" class="" >About</a>
	
		
		

		
		<a href="/contact/" class="" >Contact</a>
	
</nav>

				<!--<p class="editor-link"><a style="display:inline;" href="/_data/navigation.yml" class="btn"><strong>&#9998;</strong> Edit navigation</a></p>-->
			</div>
		</header>

		<section class="hero page-hero random-images" >
	<div class="inner-hero text-container">
		<div class="hero-text-container">
			<h1>React Redux with typescript</h1>
			<p class="subtext">In this article we will focus on configuring redux, creating our first action, reducer & store.</p>
		</div>
	</div>
</section>

<section>
	<div class="blog-post text-container">
		<p class="post-details">
	
		<span class="blog-filter">
			<a href="/category/react/">react</a>
		</span>
	

	
	<span class="post-date">
		March 18, 2019
	</span>
</p>


		<div class="post-content">
			<p>In my earlier post, I had explained the <a href="/react/2019/03/react-basics/">basic principle of redux</a>. Also we have created <a href="/react/2019/03/react-with-typescript/">our first react app</a>.</p>

<p>I will be extending the same example to integrate redux in it, you can download the <a href="https://github.com/kuros/blog-code/tree/master/react/first-app">start code here.</a></p>

<p>Earlier we have created Books Page, which will contain the details of all the Book in the library. For now this component has a simple form to add books.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/components/book/BookPage.tsx</span>

<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">ChangeEvent</span><span class="p">,</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">FormEvent</span><span class="p">,</span> <span class="nx">ReactNode</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"react"</span><span class="p">;</span>


<span class="kd">class</span> <span class="nx">BookPage</span> <span class="kd">extends</span> <span class="nx">Component</span><span class="o">&lt;</span><span class="nx">BookProps</span><span class="p">,</span> <span class="nx">BookState</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="kd">constructor</span><span class="p">(</span><span class="na">props</span> <span class="p">:</span> <span class="nx">BookProps</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="na">book</span><span class="p">:</span> <span class="p">{</span><span class="na">title</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">author</span><span class="p">:</span> <span class="s1">''</span><span class="p">}};</span>
    <span class="p">}</span>

    <span class="nx">render</span><span class="p">():</span> <span class="nx">ReactNode</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">form</span> <span class="na">onSubmit=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="si">}</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Books<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Add Books<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type=</span><span class="s1">'text'</span>
                           <span class="na">onChange=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="si">}</span>
                           <span class="na">value=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">book</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span>
                    <span class="p">/&gt;</span>
                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type=</span><span class="s1">'submit'</span> <span class="na">value=</span><span class="s1">'Save'</span><span class="p">/&gt;</span>
                <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="kr">private</span> <span class="nx">handleChange</span> <span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">ChangeEvent</span><span class="o">&lt;</span><span class="nx">HTMLInputElement</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="na">book</span><span class="p">:</span><span class="nx">Book</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">book</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">book</span> <span class="p">});</span>
    <span class="p">};</span>

    <span class="kr">private</span> <span class="nx">handleSubmit</span> <span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">FormEvent</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">book</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">BookProps</span> <span class="p">{</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">BookState</span> <span class="p">{</span>
    <span class="na">book</span><span class="p">:</span> <span class="nx">Book</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">Book</span> <span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="na">author</span><span class="p">:</span> <span class="nx">string</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">BookPage</span><span class="p">;</span>
</code></pre></div></div>

<p>Let’s look into detail.</p>

<ol>
  <li>Line 6: We add what is the type prop &amp; state it would manage, here BookProps (declared at line: 40) &amp; BookState (declared at line:43) respectively.</li>
  <li>Line 8: constructor takes BookProps as constructor args.</li>
  <li>Line 10: initialize state with book value. The type is declared at line: 47</li>
  <li>Line 16: on submit of form we are calling handleSubmit method, passing the event reference (line: 34)</li>
  <li>Line 20: added function mapping on change event, references line: 29</li>
  <li>Line 30-31: We used spread operator to copy state of the book, with new title, then setting the state.</li>
  <li>Line 35: the default behaviour of form is to reload the page, we don’t want that, so we will disable the default behavior.</li>
</ol>

<p>When we run the application, and type in the text box, we get an error.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TypeError: Cannot <span class="nb">read </span>property <span class="s1">'state'</span> of undefined
handleChange
src/components/book/BookPage.tsx:28
  25 | <span class="o">}</span>
  26 | 
  27 | private handleChange <span class="o">(</span>event: ChangeEvent&lt;HTMLInputElement&gt;<span class="o">)</span> <span class="o">{</span>
<span class="o">&gt;</span> 28 |     const book:Book <span class="o">=</span> <span class="o">{</span> ...this.state.book, title: event.target.value<span class="o">}</span><span class="p">;</span>
     | ^  29 |     this.setState<span class="o">({</span> book <span class="o">})</span><span class="p">;</span>
  30 | <span class="o">}</span><span class="p">;</span>
  31 | 
View compiled
▶ 20 stack frames were collapsed.
</code></pre></div></div>

<p>In order to fix this issue we will have to bind <strong>this</strong> to the functions in constructor.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span> <span class="p">:</span> <span class="nx">BookProps</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="na">book</span><span class="p">:</span> <span class="p">{</span><span class="na">title</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">author</span><span class="p">:</span> <span class="s1">''</span><span class="p">}};</span>
        
        <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>Now we can see our functionality works, after we write in text box press save we see the alert with same text.</p>

<p>There is also a simple way of writing the classes which is less verbose;</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">BookPage</span> <span class="kd">extends</span> <span class="nx">Component</span><span class="o">&lt;</span><span class="nx">BookProps</span><span class="p">,</span> <span class="nx">BookState</span><span class="o">&gt;</span> <span class="p">{</span>
    
    <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="na">book</span><span class="p">:</span> <span class="p">{</span><span class="na">title</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">author</span><span class="p">:</span> <span class="s1">''</span><span class="p">}};</span>

    <span class="nx">render</span><span class="p">():</span> <span class="nx">ReactNode</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">form</span> <span class="na">onSubmit=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="si">}</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Books<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Add Books<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type=</span><span class="s1">'text'</span>
                           <span class="na">onChange=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="si">}</span>
                           <span class="na">value=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">book</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span>
                    <span class="p">/&gt;</span>
                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type=</span><span class="s1">'submit'</span> <span class="na">value=</span><span class="s1">'Save'</span><span class="p">/&gt;</span>
                <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="kr">private</span> <span class="nx">handleChange</span> <span class="o">=</span> <span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">ChangeEvent</span><span class="o">&lt;</span><span class="nx">HTMLInputElement</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="na">book</span><span class="p">:</span><span class="nx">Book</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">book</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">book</span> <span class="p">});</span>
    <span class="p">};</span>

    <span class="kr">private</span> <span class="nx">handleSubmit</span> <span class="o">=</span> <span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">FormEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">book</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You don’t need to call super or declare a constructor, no binding required, as we are using arrow function.</p>

<p>Great !!! Time for Redux.</p>

<h1 id="installing-redux">Installing Redux</h1>

<p>First thing first, lets add redux packages.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">--save</span> @types/react-redux react-redux
<span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">--save-dev</span> @types/redux-devtools redux-devtools
<span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">--save</span> @types/redux-immutable-state-invariant redux-immutable-state-invariant
</code></pre></div></div>

<p><em>redux-immutable-state-invariant</em> is a middleware, which ensures that you don’t mutate state.</p>

<h1 id="redux-action">Redux Action</h1>

<p>We have a form that is setup &amp; ready to send data, we will create action creator for Books.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/redux/book/bookActionType.ts</span>

<span class="k">import</span> <span class="p">{</span><span class="nx">Book</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"../../components/book/BookPage"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">CREATE_BOOK</span> <span class="o">=</span> <span class="s1">'CREATE_BOOK'</span><span class="p">;</span>

<span class="kr">interface</span> <span class="nx">CreateBookAction</span> <span class="p">{</span>
    <span class="nl">type</span><span class="p">:</span> <span class="k">typeof</span> <span class="nx">CREATE_BOOK</span>
    <span class="nx">payload</span><span class="p">:</span> <span class="nx">Book</span>
<span class="p">}</span>

<span class="k">export</span> <span class="nx">type</span> <span class="nx">BookActionType</span> <span class="o">=</span> <span class="nx">CreateBookAction</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>At line 7: We created interface which will have two field, type &amp; payload.</li>
  <li>At line 12: We are exporting CreateBookAction as BookActionType, because later we will be assigning &amp; checking More types.</li>
</ul>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/redux/book/bookAction.ts</span>

<span class="k">import</span> <span class="p">{</span><span class="nx">Book</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"../../components/book/BookPage"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">BookActionType</span><span class="p">,</span> <span class="nx">CREATE_BOOK</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"./bookActionType"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">createBook</span><span class="p">(</span><span class="nx">book</span><span class="p">:</span> <span class="nx">Book</span><span class="p">):</span> <span class="nx">BookActionType</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="nx">CREATE_BOOK</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">book</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Our first action is ready, which returns a BookActionType just another reminder, it must contain type field.</p>

<h1 id="redux-reducer">Redux Reducer</h1>

<p>Reducer takes two arguments, state &amp; action. In our case state will be book array, &amp; action will be of type BookActionType and it will return a new state which will be a new book array.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/redux/book/bookReducer.ts</span>

<span class="k">import</span> <span class="p">{</span><span class="nx">Book</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"../../components/book/BookPage"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">BookActionType</span><span class="p">,</span> <span class="nx">CREATE_BOOK</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"./bookActionType"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">BookReducer</span><span class="p">(</span><span class="nx">state</span><span class="p">:</span> <span class="nx">Book</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">action</span><span class="p">:</span> <span class="nx">BookActionType</span><span class="p">):</span> <span class="nx">Book</span><span class="p">[]</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">CREATE_BOOK</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[...</span><span class="nx">state</span><span class="p">,</span> <span class="p">{...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">}];</span>
        <span class="nl">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="nx">state</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Since our application is going to have a lot number of reducers, we need to combine them, using redux <strong>combineReducer</strong> function</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/redux/rootReducer.ts</span>

<span class="k">import</span> <span class="p">{</span><span class="nx">combineReducers</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"redux"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">BookReducer</span> <span class="k">from</span> <span class="s2">"./book/bookReducer"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">rootReducer</span> <span class="o">=</span> <span class="nx">combineReducers</span><span class="p">({</span>
    <span class="na">books</span><span class="p">:</span> <span class="nx">BookReducer</span>
<span class="p">});</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">rootReducer</span><span class="p">;</span>
</code></pre></div></div>

<h1 id="redux-store">Redux Store</h1>
<p>The third main component in Redux is store, so let’s not wait and create a store.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/redux/store.ts</span>
<span class="c1">// one time configuration</span>

<span class="k">import</span> <span class="p">{</span><span class="nx">applyMiddleware</span><span class="p">,</span> <span class="nx">compose</span><span class="p">,</span> <span class="nx">createStore</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"redux"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">rootReducer</span> <span class="k">from</span> <span class="s2">"./rootReducer"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">immutableStateInvariantMiddleware</span>  <span class="k">from</span> <span class="s2">"redux-immutable-state-invariant"</span><span class="p">;</span>


<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">configureStore</span><span class="p">(</span><span class="nx">initialState</span><span class="p">?:</span> <span class="nx">any</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// @ts-ignore</span>
    <span class="kd">const</span> <span class="nx">composeEnhancers</span> <span class="o">=</span>
        <span class="p">(</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="nb">window</span><span class="p">).</span><span class="nx">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span> <span class="o">||</span> <span class="nx">compose</span><span class="p">;</span> <span class="c1">// add support for Redux dev tools</span>

    <span class="k">return</span> <span class="nx">createStore</span><span class="p">(</span><span class="nx">rootReducer</span><span class="p">,</span>
        <span class="nx">initialState</span><span class="p">,</span>
        <span class="nx">composeEnhancers</span><span class="p">(</span><span class="nx">applyMiddleware</span><span class="p">(</span><span class="nx">immutableStateInvariantMiddleware</span><span class="p">())))</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>createStore</strong> takes in three argument: reducer, initial state &amp; middleware, we want to make sure our state is immutable, to make this happen we apply a middleware <strong>immutableStateInvariantMiddleware</strong> to take care of this job.</p>

<p>Now its time to plugin store to our react app. We will modify our index.tsx</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/index.tsx</span>
<span class="c1">// one time configuration</span>

<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ReactDOM</span> <span class="k">from</span> <span class="s1">'react-dom'</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">'./index.css'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="s1">'./App'</span><span class="p">;</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">serviceWorker</span> <span class="k">from</span> <span class="s1">'./serviceWorker'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">BrowserRouter</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"react-router-dom"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">configureStore</span> <span class="k">from</span> <span class="s2">"./redux/store"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">Provider</span> <span class="k">as</span> <span class="nx">ReduxProvider</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"react-redux"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">configureStore</span><span class="p">();</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">ReduxProvider</span> <span class="na">store=</span><span class="si">{</span><span class="nx">store</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">BrowserRouter</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">App</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">BrowserRouter</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">ReduxProvider</span><span class="p">&gt;,</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'root'</span><span class="p">));</span>

<span class="c1">// If you want your app to work offline and load faster, you can change</span>
<span class="c1">// unregister() to register() below. Note this comes with some pitfalls.</span>
<span class="c1">// Learn more about service workers: https://bit.ly/CRA-PWA</span>
<span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">unregister</span><span class="p">();</span>
</code></pre></div></div>
<p>We are wrapping all our application within ReduxProvider, so that store is accessible to all our application.</p>

<p>Now that out configuration is in place let’s wire in Redux in our component.</p>

<h1 id="redux-connect">Redux Connect</h1>

<p>Its time to put all the pieces together, let’s take a look at the modified BookPage:</p>
<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//  src/components/book/BookPage.tsx</span>

<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">ChangeEvent</span><span class="p">,</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">FormEvent</span><span class="p">,</span> <span class="nx">ReactNode</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"react"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">connect</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"react-redux"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">createBook</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"../../redux/book/bookAction"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">BookPage</span> <span class="kd">extends</span> <span class="nx">Component</span><span class="o">&lt;</span><span class="nx">BookProps</span><span class="p">,</span> <span class="nx">BookState</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="na">book</span><span class="p">:</span> <span class="p">{</span><span class="na">title</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">author</span><span class="p">:</span> <span class="s1">''</span><span class="p">}};</span>

    <span class="nx">render</span><span class="p">():</span> <span class="nx">ReactNode</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">form</span> <span class="na">onSubmit=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="si">}</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Books<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Add Books<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type=</span><span class="s1">'text'</span>
                           <span class="na">onChange=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="si">}</span>
                           <span class="na">value=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">book</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span>
                    <span class="p">/&gt;</span>
                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type=</span><span class="s1">'submit'</span> <span class="na">value=</span><span class="s1">'Save'</span><span class="p">/&gt;</span>


                    <span class="si">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">props</span>
                        <span class="p">.</span><span class="nx">books</span>
                        <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">book</span> <span class="o">=&gt;</span> <span class="p">(</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key=</span><span class="si">{</span><span class="nx">book</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">book</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                        <span class="p">))</span>
                    <span class="si">}</span>
                <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="kr">private</span> <span class="nx">handleChange</span> <span class="o">=</span> <span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">ChangeEvent</span><span class="o">&lt;</span><span class="nx">HTMLInputElement</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="na">book</span><span class="p">:</span><span class="nx">Book</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">book</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">book</span> <span class="p">});</span>
    <span class="p">};</span>

    <span class="kr">private</span> <span class="nx">handleSubmit</span> <span class="o">=</span> <span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">FormEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">createBook</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">book</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">BookProps</span> <span class="p">{</span>
    <span class="nx">createBook</span><span class="p">(</span><span class="na">book</span><span class="p">:</span> <span class="nx">Book</span><span class="p">):</span> <span class="k">void</span><span class="p">;</span>
    <span class="nl">books</span><span class="p">:</span> <span class="nx">Book</span><span class="p">[];</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">BookState</span> <span class="p">{</span>
    <span class="na">book</span><span class="p">:</span> <span class="nx">Book</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">Book</span> <span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="na">author</span><span class="p">:</span> <span class="nx">string</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">BookStoreState</span> <span class="p">{</span>
    <span class="na">books</span><span class="p">:</span> <span class="nx">Book</span><span class="p">[]</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">mapStateToProps</span><span class="p">(</span><span class="na">state</span><span class="p">:</span> <span class="nx">BookStoreState</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">books</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">books</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">mapDispatchToProps</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">createBook</span><span class="p">:</span> <span class="nx">createBook</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">connect</span><span class="p">(</span><span class="nx">mapStateToProps</span><span class="p">,</span> <span class="nx">mapDispatchToProps</span><span class="p">)(</span><span class="nx">BookPage</span><span class="p">);</span>
</code></pre></div></div>

<p>This time lets review from down to up:</p>

<ol>
  <li>Line 75: We are not exporting BookPage now, instead we are calling connect function (of redux) with mapStateToProps &amp; mapDispatchToProps, the output is a function to which we are passing our BookPage.</li>
  <li>Line 71: We have created mapping object, which will get bind to react props. We can also use a function instead, but in that case, we will have to dispatch our action explicitly.</li>
  <li>Line 65: Maps redux store state to props, in the root reducer, we have assigned output array to books variable, so to get new state, we fetch state.books</li>
  <li>Line 47: BookProps has changed, now it contains book field &amp; createBook function (mapped in function at line: 71 &amp; line:75).</li>
  <li>Line 43: In the handleSubmit function, we are dispatching event by calling props.createBook method.</li>
  <li>Line 25: Finally, we have iterated over mapped store books and printed the titles.</li>
</ol>

<p>If you have followed correctly, you can see your page in action.</p>

<p><img alt="react redux complete" src="/images/loader.gif" data-src="/images/2019/react/react-redux.gif" class="lazy img-center img-half" /></p>

<h1 id="conclusion">Conclusion</h1>

<p>In this article we have integrated redux to react, in typescript. As usual the complete code is on <a href="https://github.com/kuros/blog-code/tree/master/react/react-redux">github</a>.</p>



			<div class="blog-navigation">
				
					
					<a class="prev" href="/react/2019/03/react-basics/">&laquo; Redux Basics</a>

					

					
				
			</div>

			<div class="author">
				
				
				<div class="square-image" style="background-image: url('/images/about/myphoto.png')"></div>
				<p class="blurb">I like long drives, bike trip & good food. I have passion for coding, esp. Clean-Code.</p>
			</div>






			

			<div id="disqus_thread"></div>
			<script>

				/**
				 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
				 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

                var disqus_config = function () {
                this.page.url = "https://kuros.in/react/2019/03/react-redux/";  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = "/react/2019/03/react-redux"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                };

				(function() { // DON'T EDIT BELOW THIS LINE
					var d = document, s = d.createElement('script');
					s.src = 'https://kuros-in.disqus.com/embed.js';
					s.setAttribute('data-timestamp', +new Date());
					(d.head || d.body).appendChild(s);
				})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
			
		</div>
	</div>
</section>



		<footer>
			<div class="container">
				<!--<p class="editor-link"><a href="/_data/footer.yml" class="btn"><strong>&#9998;</strong> Edit footer</a></p>-->
				<ul class="footer-left-links">
					
						<li>
							<a  href="/random-jpa/" >
								
								Random-JPA
							</a>
						</li>
					
						<li>
							<a  href="/blog/" >
								
								Blog
							</a>
						</li>
					
						<li>
							<a  href="/about/" >
								
								About
							</a>
						</li>
					
						<li>
							<a  href="/contact/" >
								
								Contact
							</a>
						</li>
					
				</ul>
				<ul class="footer-right-links">
					
						<li>
							<a target="_blank" href="https://www.facebook.com/kumarrohit.1010" class="facebook-icon">
								
		<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M19,4V7H17A1,1 0 0,0 16,8V10H19V13H16V20H13V13H11V10H13V7.5C13,5.56 14.57,4 16.5,4M20,2H4A2,2 0 0,0 2,4V20A2,2 0 0,0 4,22H20A2,2 0 0,0 22,20V4C22,2.89 21.1,2 20,2Z" /></svg>
	
								
							</a>
						</li>
					
						<li>
							<a target="_blank" href="https://twitter.com/incrv83" class="twitter-icon">
								
		<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z" /></svg>
	
								
							</a>
						</li>
					
						<li>
							<a target="_blank" href="https://www.linkedin.com/in/kumar-rohit-9a985517/" class="linkedin-icon">
								
		<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M19,19H16V13.7A1.5,1.5 0 0,0 14.5,12.2A1.5,1.5 0 0,0 13,13.7V19H10V10H13V11.2C13.5,10.36 14.59,9.8 15.5,9.8A3.5,3.5 0 0,1 19,13.3M6.5,8.31C5.5,8.31 4.69,7.5 4.69,6.5A1.81,1.81 0 0,1 6.5,4.69C7.5,4.69 8.31,5.5 8.31,6.5A1.81,1.81 0 0,1 6.5,8.31M8,19H5V10H8M20,2H4C2.89,2 2,2.89 2,4V20A2,2 0 0,0 4,22H20A2,2 0 0,0 22,20V4C22,2.89 21.1,2 20,2Z" /></svg>
	
								
							</a>
						</li>
					
						<li>
							<a  href="/feed.xml" class="rss-icon">
								
		<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><circle cx="6.18" cy="17.82" r="2.18"/><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg>
	
								
							</a>
						</li>
					
				</ul>
				<p class="copyright">
					<a href="https://cloudcannon.com/">
						Template by CloudCannon
					</a>
				</p>
			</div>
		</footer>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script src="/js/main.js"></script>

		<a id="back2Top" title="Back to top" href="#">&#10148;</a>
	</body>
</html>
