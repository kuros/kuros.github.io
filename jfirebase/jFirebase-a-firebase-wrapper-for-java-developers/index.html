<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.20.2 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>jFirebase - Entity Framework for Firebase/Firestore - Kuros.in</title>
<meta name="description" content="A framework designed to help java developers to work with firebase">


  <meta name="author" content="Kumar Rohit">
  
  <meta property="article:author" content="Kumar Rohit">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Kuros.in">
<meta property="og:title" content="jFirebase - Entity Framework for Firebase/Firestore">
<meta property="og:url" content="https://kuros.in/jfirebase/jFirebase-a-firebase-wrapper-for-java-developers/">


  <meta property="og:description" content="A framework designed to help java developers to work with firebase">







  <meta property="article:published_time" content="2019-10-26T00:00:00+00:00">






<link rel="canonical" href="https://kuros.in/jfirebase/jFirebase-a-firebase-wrapper-for-java-developers/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://kuros.in/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Kuros.in Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
<link rel="icon" type="image/png" href="/images/favicon.ico" sizes="192x192">
<link rel="icon" type="image/png" href="/images/favicon.ico">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/images/logo/logo-dark.svg" alt=""></a>
        
        <a class="site-title" href="/">
          Kuros.in
          <span class="site-subtitle">A collection of things I learn and try, simplified.</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/random-jpa/">Random-JPA</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/jfirebase/">jFirebase</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
    <div class="sidebar sidebar__sticky">
    
        <nav class="toc">
          <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Contents</h4></header>
            <ul class="toc__menu">
  <li><a href="#initialise">Initialise</a></li>
  <li><a href="#entity">Entity</a></li>
  <li><a href="#metadata">Metadata</a></li>
  <li><a href="#creating-object">Creating object</a></li>
  <li><a href="#creating-object-with-id">Creating object with id</a></li>
  <li><a href="#updatesilent-create">Update/Silent create</a></li>
  <li><a href="#updating-field">Updating field</a></li>
  <li><a href="#updating-multiple-fields">Updating multiple fields</a></li>
  <li><a href="#working-with-sub-collection">Working with Sub Collection</a></li>
  <li><a href="#update-map-values">Update Map values</a></li>
  <li><a href="#removing-fields">Removing Fields</a></li>
  <li><a href="#delete-record">Delete Record</a></li>
  <li><a href="#query">Query</a></li>
  <li><a href="#find-by-id">Find by Id</a></li>
  <li><a href="#select-few-fields">Select few fields</a></li>
  <li><a href="#running-queries-in-transaction">Running queries in Transaction</a></li>
  <li><a href="#batching">Batching</a></li>
</ul>

        </nav>
    
    
      
    
  </div>
  



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="jFirebase - Entity Framework for Firebase/Firestore">
    <meta itemprop="description" content="I decided to tryout firebase for my personal projects &amp; learning, having come from traditional SQL background, I am well versed with JPA/Hibernate when dealing with databases. But when I started firebase, I found it completely different but also having some similarities. After spending some time understanding its feature I started looking a framework similar to JPA for firebase. I found none, so I decided to write one for myself.">
    <meta itemprop="datePublished" content="2019-10-26T00:00:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">jFirebase - Entity Framework for Firebase/Firestore
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right  " style="height: 100%;">
            
            
                
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<div class="sidebar_ads">


    

    <div class="ad">
        

        
            <!-- sky-scrapper -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-4166026699724584"
                data-ad-slot="5730852605"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>

            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        
    </div>

</div>
 
            
          </aside>
        
        <p>I decided to tryout firebase for my personal projects &amp; learning, having come from traditional SQL background, I am well versed with JPA/Hibernate when dealing with databases. But when I started firebase, I found it completely different but also having some similarities. After spending some time understanding its feature I started looking a framework similar to JPA for firebase. I found none, so I decided to write one for myself.</p>

<p><a href="https://github.com/kuros/jFirebase">Github Source - jFirebase</a></p>

<h1 id="initialise">Initialise</h1>

<p>Add Maven dependency:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>in.kuros<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>jFirebase<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>0.1<span class="nt">&lt;/version&gt;</span> <span class="c">&lt;!-- Use the latest version--&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<p>Use the<code class="language-plaintext highlighter-rouge"> PersistenceServiceFactory</code> to generate instance of <code class="language-plaintext highlighter-rouge">PersistenceService</code>, we need pass firestore instance and provide a list of packages where your entities reside.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// initialise with firestore &amp; base package</span>
<span class="kd">final</span> <span class="nc">PersistenceService</span> <span class="n">persistenceService</span> <span class="o">=</span> <span class="nc">PersistenceServiceFactory</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">firestore</span><span class="o">,</span> <span class="s">"in.kuros.jfirebase.demo.entity"</span><span class="o">);</span>
</code></pre></div></div>

<p>Now that we have initialized our persistence service we will start creating our entities to work with.</p>

<h1 id="entity">Entity</h1>
<p>We will use a simple pojo class and convert it into an jFirebase Entity by providing <code class="language-plaintext highlighter-rouge">@Entity</code>, you will also need to provide <code class="language-plaintext highlighter-rouge">@Id</code> field.</p>

<p>Currently only String &amp; Enum are supported as Id field.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">in.kuros.jfirebase.demo.entity</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.entity.CreateTime</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.entity.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.entity.Id</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.entity.UpdateTime</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="nd">@Data</span>
<span class="nd">@Entity</span><span class="o">(</span><span class="s">"person"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>

    <span class="nd">@Id</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">personId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@CreateTime</span>
    <span class="kd">private</span> <span class="nc">Date</span> <span class="n">created</span><span class="o">;</span>
    <span class="nd">@UpdateTime</span>
    <span class="kd">private</span> <span class="nc">Date</span> <span class="n">lastModified</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>We can also mark Date field for <code class="language-plaintext highlighter-rouge">@CreateTime</code> &amp; <code class="language-plaintext highlighter-rouge">@UpdateTime</code> to record creation time &amp; update time implicitly.</p>

<h1 id="metadata">Metadata</h1>
<p>We will also need to create metadata class to record field description for the corresponding class.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">in.kuros.jfirebase.demo.entity</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.metadata.Attribute</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.metadata.Metadata</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="nd">@Metadata</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person_</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">Attribute</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">personId</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">Attribute</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">Attribute</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">,</span> <span class="nc">Date</span><span class="o">&gt;</span> <span class="n">created</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">Attribute</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">,</span> <span class="nc">Date</span><span class="o">&gt;</span> <span class="n">lastModified</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Annotate the class with <code class="language-plaintext highlighter-rouge">@Metadata</code> and create <code class="language-plaintext highlighter-rouge">Attribute</code> field for all the corresponding fields on main class.</p>

<p>Our setup is almost done, lets create our first object using persistenceService.</p>

<h1 id="creating-object">Creating object</h1>

<p>To create a new entry in database use <em>create</em> method. It will auto generate Id &amp; createTime will be updated.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPersonExample</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Person</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="n">p</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"Rohit"</span><span class="o">);</span>

        <span class="n">persistenceService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">getPersonId</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4166026699724584" data-ad-slot="8512487719"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p><img alt="jfirebase-create" src="/images/loader.svg" data-src="/images/2019/jfirebase/create.png" class="lazy img-center" /></p>

<h1 id="creating-object-with-id">Creating object with id</h1>

<p>You can create entities with custom ids.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPersonWithCustomIdExample</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Person</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="n">p</span><span class="o">.</span><span class="na">setPersonId</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>
        <span class="n">p</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"Rohit"</span><span class="o">);</span>

        <span class="n">persistenceService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">getPersonId</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<p><img alt="jfirebase-create" src="/images/loader.svg" data-src="/images/2019/jfirebase/create-id.png" class="lazy img-center" /></p>

<p><strong>Note: Create method will throw exception if entity with id already exists.</strong></p>

<h1 id="updatesilent-create">Update/Silent create</h1>

<p>Use <em>set</em> method to create/update entity silently, ie. if entity exists, it will be updated else a new entry will be created.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updatePersonExample</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Person</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="n">p</span><span class="o">.</span><span class="na">setPersonId</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span> <span class="c1">// optional if you want to create a new entry</span>
        <span class="n">p</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"Rohit"</span><span class="o">);</span>

        <span class="n">persistenceService</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">getPersonId</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>The set(entity) would update the complete entity.</p>

<h1 id="updating-field">Updating field</h1>

<p>Let’s say I want to update age of person. We need to provide entity with id and age field populated (in this case personId is a requiredField).</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateField</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Person</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="n">p</span><span class="o">.</span><span class="na">setPersonId</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span> <span class="c1">// optional if you want to create a new entry</span>
        <span class="n">p</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span>

        <span class="n">persistenceService</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="n">Person_</span><span class="o">.</span><span class="na">age</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>If id field is provided, given field will be updated else a new entry is created.</p>

<p><img alt="jfirebase-set" src="/images/loader.svg" data-src="/images/2019/jfirebase/set.png" class="lazy img-center" /></p>

<h1 id="updating-multiple-fields">Updating multiple fields</h1>

<p>We can update multiple fields, Use <code class="language-plaintext highlighter-rouge">AttributeValue</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateMultipleFields</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">persistenceService</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="nc">AttributeValue</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Person_</span><span class="o">.</span><span class="na">personId</span><span class="o">,</span> <span class="s">"1"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Person_</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="s">"I changed my name"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Person_</span><span class="o">.</span><span class="na">age</span><span class="o">,</span> <span class="mi">25</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4166026699724584" data-ad-slot="8512487719"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p><img alt="jfirebase-set" src="/images/loader.svg" data-src="/images/2019/jfirebase/set-multiple.png" class="lazy img-center" /></p>

<h1 id="working-with-sub-collection">Working with Sub Collection</h1>

<p>Let’s say you want to map sub collection, you need to create a pojo with parent id reference.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">in.kuros.jfirebase.demo.entity</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.entity.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.entity.Id</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.entity.IdReference</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.entity.Parent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.entity.UpdateTime</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="nd">@Entity</span><span class="o">(</span><span class="s">"employee"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee</span> <span class="o">{</span>

    <span class="nd">@Id</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">employeeId</span><span class="o">;</span>

    <span class="nd">@Parent</span>
    <span class="nd">@IdReference</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">personId</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">Date</span> <span class="n">joiningDate</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">salary</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">phoneNumbers</span><span class="o">;</span>

    <span class="nd">@UpdateTime</span>
    <span class="kd">private</span> <span class="nc">Date</span> <span class="n">modifiedDate</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Here we are using <code class="language-plaintext highlighter-rouge">@Parent</code> with <code class="language-plaintext highlighter-rouge">@IdReference</code> to map parent information.</p>

<p>Also note, to save phone numbers we are using a map. Its corresponding Metadata class will be:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">in.kuros.jfirebase.demo.entity</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.entity.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.metadata.Attribute</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.metadata.MapAttribute</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.jfirebase.metadata.Metadata</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="nd">@Metadata</span><span class="o">(</span><span class="nc">Employee</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee_</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">Attribute</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">employeeId</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">Attribute</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">personId</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">Attribute</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">,</span> <span class="nc">Date</span><span class="o">&gt;</span> <span class="n">joiningDate</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">Attribute</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">salary</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">MapAttribute</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">,</span> <span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">phoneNumbers</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">Attribute</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">,</span> <span class="nc">Date</span><span class="o">&gt;</span> <span class="n">modifiedDate</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></div></div>

<p>Now to create a Employee entry within Person collection, simply create Employee object with person reference.
Note that for phoneNumbers we are using <code class="language-plaintext highlighter-rouge">MapAttribute</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createSubCollection</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Employee</span><span class="o">();</span>
        <span class="n">employee</span><span class="o">.</span><span class="na">setEmployeeId</span><span class="o">(</span><span class="s">"123"</span><span class="o">);</span> <span class="c1">// Optional if you want custom id</span>
        <span class="n">employee</span><span class="o">.</span><span class="na">setPersonId</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>
        <span class="n">employee</span><span class="o">.</span><span class="na">setJoiningDate</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">());</span>
        <span class="n">employee</span><span class="o">.</span><span class="na">setSalary</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>

        <span class="kd">final</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">phoneNumbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">phoneNumbers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"office"</span><span class="o">,</span> <span class="s">"123-345-567"</span><span class="o">);</span>
        <span class="n">phoneNumbers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"home"</span><span class="o">,</span> <span class="s">"456-789-456"</span><span class="o">);</span>
        <span class="n">employee</span><span class="o">.</span><span class="na">setPhoneNumbers</span><span class="o">(</span><span class="n">phoneNumbers</span><span class="o">);</span>

        <span class="n">persistenceService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">employee</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- horizontal - responsive -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4166026699724584" data-ad-slot="7276848543" data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p><img alt="jfirebase-sub-collection" src="/images/loader.svg" data-src="/images/2019/jfirebase/sub-collection.png" class="lazy img-center" /></p>

<h1 id="update-map-values">Update Map values</h1>

<p>Let’s say we want to update specific value in a map (home phone number).</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateMapUsingKeyValue</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">persistenceService</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="nc">AttributeValue</span>
                <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">employeeId</span><span class="o">,</span> <span class="s">"123"</span><span class="o">)</span> <span class="c1">// Required field</span>
                <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">personId</span><span class="o">,</span> <span class="s">"1"</span><span class="o">)</span> <span class="c1">// Required field</span>
                <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">phoneNumbers</span><span class="o">,</span> <span class="s">"home"</span><span class="o">,</span> <span class="s">"111-111-111"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<p><img alt="jfirebase-map-key" src="/images/loader.svg" data-src="/images/2019/jfirebase/set-map-key.png" class="lazy img-center" /></p>

<p>or we can completely replace the map - update all the phone numbers</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateCompleteMapValues</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">phoneNumbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">phoneNumbers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"office"</span><span class="o">,</span> <span class="s">"123-345-XXX"</span><span class="o">);</span>
        <span class="n">phoneNumbers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"home"</span><span class="o">,</span> <span class="s">"456-789-XXX"</span><span class="o">);</span>

        <span class="n">persistenceService</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="nc">AttributeValue</span>
                <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">employeeId</span><span class="o">,</span> <span class="s">"123"</span><span class="o">)</span> <span class="c1">// Required field</span>
                <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">personId</span><span class="o">,</span> <span class="s">"1"</span><span class="o">)</span> <span class="c1">// Required field</span>
                <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">phoneNumbers</span><span class="o">,</span> <span class="n">phoneNumbers</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<p><img alt="jfirebase-map" src="/images/loader.svg" data-src="/images/2019/jfirebase/set-map.png" class="lazy img-center" /></p>

<h1 id="removing-fields">Removing Fields</h1>
<p>In order to delete just a field from the entry, Use:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">removeFields</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">persistenceService</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="nc">RemoveAttribute</span><span class="o">.</span><span class="na">withKeys</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">personId</span><span class="o">,</span> <span class="s">"1"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">withKey</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">employeeId</span><span class="o">,</span> <span class="s">"123"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">salary</span><span class="o">)</span>
                <span class="o">.</span><span class="na">removeMapKey</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">phoneNumbers</span><span class="o">,</span> <span class="s">"home"</span><span class="o">));</span>
    <span class="o">}</span>
</code></pre></div></div>
<p>Here we have deleted salary field and an entry of ‘home’ from phone numbers.</p>

<p><img alt="jfirebase-map" src="/images/loader.svg" data-src="/images/2019/jfirebase/remove.png" class="lazy img-center" /></p>

<h1 id="delete-record">Delete Record</h1>

<p>To delete a complete record:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteCompleteRecord</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Employee</span><span class="o">();</span>
        <span class="n">employee</span><span class="o">.</span><span class="na">setEmployeeId</span><span class="o">(</span><span class="s">"123"</span><span class="o">);</span>
        <span class="n">employee</span><span class="o">.</span><span class="na">setPersonId</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>
        <span class="n">persistenceService</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">employee</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>
<p>You need to populate required id fields.</p>

<p><img alt="jfirebase-map" src="/images/loader.svg" data-src="/images/2019/jfirebase/delete.png" class="lazy img-center" /></p>

<h1 id="query">Query</h1>

<p>To query you need to provide classes in order.</p>

<p>Let’s say you want to find all the employee with salary greater than 1000.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">query</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">employees</span> <span class="o">=</span> <span class="n">persistenceService</span>
                <span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">QueryBuilder</span>
                        <span class="o">.</span><span class="na">collection</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">withId</span><span class="o">(</span><span class="s">"1"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">subCollection</span><span class="o">(</span><span class="nc">Employee</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">whereGreaterThan</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">salary</span><span class="o">,</span> <span class="mi">1000</span><span class="o">));</span>
        <span class="n">employees</span>
                <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4166026699724584" data-ad-slot="8512487719"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Employee<span class="o">(</span><span class="nv">employeeId</span><span class="o">=</span>123, <span class="nv">personId</span><span class="o">=</span>1, <span class="nv">joiningDate</span><span class="o">=</span>Sun Oct 27 02:39:43 IST 2019, <span class="nv">salary</span><span class="o">=</span>5000, <span class="nv">phoneNumbers</span><span class="o">={</span><span class="nv">office</span><span class="o">=</span>123-345-567, <span class="nv">home</span><span class="o">=</span>456-789-456<span class="o">}</span>, <span class="nv">modifiedDate</span><span class="o">=</span>Sun Oct 27 02:39:43 IST 2019<span class="o">)</span>
</code></pre></div></div>

<h1 id="find-by-id">Find by Id</h1>

<p>To find a record by Id:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">queryFindById</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="n">persistenceService</span>
                <span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="nc">QueryBuilder</span>
                        <span class="o">.</span><span class="na">collection</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">withId</span><span class="o">(</span><span class="s">"1"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">subCollection</span><span class="o">(</span><span class="nc">Employee</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">withId</span><span class="o">(</span><span class="s">"123"</span><span class="o">));</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>Provide the full path to fetch item by id.</p>

<h1 id="select-few-fields">Select few fields</h1>

<p>Let’s say you want to fetch only salaries of all the employees:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">querySelectedFields</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">employees</span> <span class="o">=</span> <span class="n">persistenceService</span>
                <span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">QueryBuilder</span>
                        <span class="o">.</span><span class="na">collection</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">withId</span><span class="o">(</span><span class="s">"1"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">subCollection</span><span class="o">(</span><span class="nc">Employee</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">employeeId</span><span class="o">,</span> <span class="n">Employee_</span><span class="o">.</span><span class="na">salary</span><span class="o">));</span>

        <span class="n">employees</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>

    <span class="o">}</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Employee<span class="o">(</span><span class="nv">employeeId</span><span class="o">=</span>123, <span class="nv">personId</span><span class="o">=</span>null, <span class="nv">joiningDate</span><span class="o">=</span>null, <span class="nv">salary</span><span class="o">=</span>5000, <span class="nv">phoneNumbers</span><span class="o">=</span>null, <span class="nv">modifiedDate</span><span class="o">=</span>null<span class="o">)</span>
</code></pre></div></div>

<h1 id="running-queries-in-transaction">Running queries in Transaction</h1>

<p>You can run the transaction and execute multiple queries in it.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">runTransactionExample</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">updatedEmployees</span> <span class="o">=</span> <span class="n">persistenceService</span><span class="o">.</span><span class="na">runTransaction</span><span class="o">(</span>
            <span class="n">transaction</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">employees</span> <span class="o">=</span> <span class="n">transaction</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="nc">QueryBuilder</span>
                        <span class="o">.</span><span class="na">collection</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">withId</span><span class="o">(</span><span class="s">"1"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">subCollection</span><span class="o">(</span><span class="nc">Employee</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
    
                <span class="n">employees</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">peek</span><span class="o">(</span><span class="n">emp</span> <span class="o">-&gt;</span> <span class="n">emp</span><span class="o">.</span><span class="na">setSalary</span><span class="o">(</span><span class="mi">6000</span><span class="o">))</span>
                        <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nl">transaction:</span><span class="o">:</span><span class="n">set</span><span class="o">);</span>
                <span class="k">return</span> <span class="n">employees</span><span class="o">;</span>
        <span class="o">});</span>

        <span class="n">updatedEmployees</span>
                <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Employee<span class="o">(</span><span class="nv">employeeId</span><span class="o">=</span>123, <span class="nv">personId</span><span class="o">=</span>1, <span class="nv">joiningDate</span><span class="o">=</span>Sun Oct 27 02:44:21 IST 2019, <span class="nv">salary</span><span class="o">=</span>6000, <span class="nv">phoneNumbers</span><span class="o">={</span><span class="nv">office</span><span class="o">=</span>123-345-567, <span class="nv">home</span><span class="o">=</span>456-789-456<span class="o">}</span>, <span class="nv">modifiedDate</span><span class="o">=</span>Sun Oct 27 02:54:21 IST 2019<span class="o">)</span>
</code></pre></div></div>

<h1 id="batching">Batching</h1>

<p>You can batch multiple statements and commit them at once.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">runBatchExample</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">persistenceService</span><span class="o">.</span><span class="na">writeInBatch</span><span class="o">(</span><span class="n">writeBatch</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">writeBatch</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="nc">AttributeValue</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Person_</span><span class="o">.</span><span class="na">personId</span><span class="o">,</span> <span class="s">"2"</span><span class="o">)</span> <span class="c1">// Required field</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Person_</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="s">"Jon"</span><span class="o">)</span> <span class="c1">// Required field</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Person_</span><span class="o">.</span><span class="na">age</span><span class="o">,</span> <span class="mi">25</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">build</span><span class="o">());</span>
    
                <span class="n">writeBatch</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="nc">AttributeValue</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">employeeId</span><span class="o">,</span> <span class="s">"123"</span><span class="o">)</span> <span class="c1">// Required field</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">personId</span><span class="o">,</span> <span class="s">"2"</span><span class="o">)</span> <span class="c1">// Required field</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">Employee_</span><span class="o">.</span><span class="na">phoneNumbers</span><span class="o">,</span> <span class="s">"home"</span><span class="o">,</span> <span class="s">"222-222-222"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">build</span><span class="o">());</span>
            <span class="o">});</span>
        <span class="o">}</span>
</code></pre></div></div>

<p>You can find the code example <a href="https://github.com/kuros/jFirebase/tree/master/demo">here</a></p>


        

      </section>

      <footer class="page__meta">
        
        


  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/jfirebase" class="page__taxonomy-item" rel="tag">jFirebase</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2019-10-26T00:00:00+00:00">October 26, 2019</time></p>


        


<div class="author__scope" itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/images/about/myphoto.png" alt="Kumar Rohit" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <div class="author__written">WRITTEN BY</div>
    
      <h3 class="author__name" itemprop="name">Kumar Rohit</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>I like long drives, bike trip &amp; good food. I have passion for coding, especially for Clean-Code.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">India</span>
        </li>
      

      
        
          
            <li><a href="https://www.linkedin.com/in/kumar-rohit-9a985517/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://twitter.com/incrv83" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
            <li><a href="https://github.com/kuros" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>
 
      </footer>

      

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=jFirebase+-+Entity+Framework+for+Firebase%2FFirestore%20https%3A%2F%2Fkuros.in%2Fjfirebase%2FjFirebase-a-firebase-wrapper-for-java-developers%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fkuros.in%2Fjfirebase%2FjFirebase-a-firebase-wrapper-for-java-developers%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fkuros.in%2Fjfirebase%2FjFirebase-a-firebase-wrapper-for-java-developers%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/java/microservices/2019/08/parallel-service-execution-in-microservices-architecture-using-completable-future/" class="pagination--pager" title="Making parallel service calls in microservice architecture.
">Previous</a>
    
    
      <a href="/messaging/getting-started-with-kafka-install-and-messaging/" class="pagination--pager" title="Getting started with kafka messaging
">Next</a>
    
  </nav>

    </div>
    
    <div class="page__ads__related">
      


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- horizontal - responsive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4166026699724584"
     data-ad-slot="7276848543"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Leave a comment</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>  

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/typescript/nestjs-role-based-authentication-and-authorization-using-guards/" rel="permalink">Role based authentication in NestJS using Guards
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">In this article, we will focus on Role Based Access Control (RBAC) using the Guards in a nestJS application.

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/typescript/nestjs-mongodb-integration-example/" rel="permalink">NestJs Application with MongoDB
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">This article focuses on integrating mongoDB to a Nest Application.

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/typescript/nestjs-upload-download-file-from-cloud-storage/" rel="permalink">NestJs Application to upload/download file from GCP cloud storage
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">In this article, we will upload a file to cloud storage and download it to serve it from our nestJS api.

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/gcp/publish-npm-package-to-gcp-using-github-actions/" rel="permalink">Publish npm packages to gcp artifact registry using github actions
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Github gives a generous limits for your private projects, its to good for your private repos or even small startups.
However, Github package has a constraint...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
  
</div>

<div class="page">
  


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- horizontal - responsive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4166026699724584"
     data-ad-slot="7276848543"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/incrv83" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/kuros" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Kuros.in. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-131802948-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-131802948-1', { 'anonymize_ip': false});
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://kuros.in/jfirebase/jFirebase-a-firebase-wrapper-for-java-developers/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/jfirebase/jFirebase-a-firebase-wrapper-for-java-developers"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://kuros-in.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  



  
    <script src="/assets/js/custom.js"></script>
  



  </body>
</html>
