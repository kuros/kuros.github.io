<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.20.2 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Random-JPA Integration (Contd.) - Kuros.in</title>
<meta name="description" content="Writing a more complex data setup">


  <meta name="author" content="Kumar Rohit">
  
  <meta property="article:author" content="Kumar Rohit">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Kuros.in">
<meta property="og:title" content="Random-JPA Integration (Contd.)">
<meta property="og:url" content="https://kuros.in/random-jpa/rjpa-2-integration/">


  <meta property="og:description" content="Writing a more complex data setup">







  <meta property="article:published_time" content="2019-01-20T00:00:00+05:30">






<link rel="canonical" href="https://kuros.in/random-jpa/rjpa-2-integration/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://kuros.in/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Kuros.in Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
<link rel="icon" type="image/png" href="/images/favicon.ico" sizes="192x192">
<link rel="icon" type="image/png" href="/images/favicon.ico">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/images/logo/logo-dark.svg" alt=""></a>
        
        <a class="site-title" href="/">
          Kuros.in
          <span class="site-subtitle">A collection of things I learn and try, simplified.</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/random-jpa/">Random-JPA</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/jfirebase/">jFirebase</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
    <div class="sidebar sidebar__sticky">
    
        <nav class="toc">
          <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Contents</h4></header>
            <ul class="toc__menu">
  <li><a href="#test-breakdown">Test Breakdown</a></li>
  <li><a href="#time-to-fix-the-test">Time to fix the test</a></li>
  <li><a href="#make-jpacontext-singleton">Make JPAContext Singleton</a></li>
  <li><a href="#complete-test">Complete Test</a></li>
</ul>

        </nav>
    
    
      
    
  </div>
  



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Random-JPA Integration (Contd.)">
    <meta itemprop="description" content="In my previous post, we have written a jpa query to fetch latest salary of employees but there was an error in response, so we are first writing a failing tests to capture the error and then we will fix the bug.">
    <meta itemprop="datePublished" content="2019-01-20T00:00:00+05:30">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Random-JPA Integration (Contd.)
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right  " style="height: 100%;">
            
            
                
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<div class="sidebar_ads">


    

    <div class="ad">
        

        
            <!-- sky-scrapper -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-4166026699724584"
                data-ad-slot="5730852605"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>

            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        
    </div>

</div>
 
            
          </aside>
        
        <p>In my previous post, we have written a jpa query to fetch latest salary of employees but there was an error in response, so we are first writing a failing tests to capture the error and then we will fix the bug.</p>

<p>Before we proceed with the new test, lets create a <a href="https://docs.oracle.com/javaee/6/tutorial/doc/gjiup.html">StaticMetaModel</a>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">in.kuros.randomjpa.blogexample.entity</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.persistence.metamodel.SingularAttribute</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.metamodel.StaticMetamodel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.LocalDate</span><span class="o">;</span>

<span class="nd">@StaticMetamodel</span><span class="o">(</span><span class="nc">Salary</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Salary_</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">SingularAttribute</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">SingularAttribute</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">employeeId</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">SingularAttribute</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">salary</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">SingularAttribute</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">,</span> <span class="nc">LocalDate</span><span class="o">&gt;</span> <span class="n">fromDate</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">SingularAttribute</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">,</span> <span class="nc">LocalDate</span><span class="o">&gt;</span> <span class="n">toDate</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></div></div>

<p>Itâ€™s time to test our query with more intensive data. In this scenario, we want to create two salary records for a given employee with custom from and to dates, and fetch his latest salary.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Test</span> <span class="nd">@Transactional</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldTestToFetchLatestSalaryRecordForMultipleEntry</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">JPAContext</span> <span class="n">jpaContext</span> <span class="o">=</span> <span class="nc">JPAContextFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="nc">Database</span><span class="o">.</span><span class="na">MY_SQL</span><span class="o">,</span> <span class="n">entityManager</span><span class="o">)</span>
                <span class="o">.</span><span class="na">generate</span><span class="o">();</span>

        <span class="kd">final</span> <span class="nc">LocalDate</span> <span class="n">oldFromDate</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">minusDays</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
        <span class="kd">final</span> <span class="nc">LocalDate</span> <span class="n">oldToDate</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">minusDays</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

        <span class="kd">final</span> <span class="nc">LocalDate</span> <span class="n">newFromDate</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="kd">final</span> <span class="nc">LocalDate</span> <span class="n">newToDate</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">plusDays</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>


        <span class="kd">final</span> <span class="nc">ResultMap</span> <span class="n">resultMap</span> <span class="o">=</span> <span class="n">jpaContext</span><span class="o">.</span><span class="na">createAndPersist</span><span class="o">(</span>
                <span class="nc">Entity</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Salary</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">fromDate</span><span class="o">,</span> <span class="n">oldFromDate</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">toDate</span><span class="o">,</span> <span class="n">oldToDate</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">fromDate</span><span class="o">,</span> <span class="n">newFromDate</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">toDate</span><span class="o">,</span> <span class="n">newToDate</span><span class="o">));</span>

        <span class="n">resultMap</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span> <span class="c1">//just for debugging</span>

        <span class="kd">final</span> <span class="nc">Salary</span> <span class="n">salary1</span> <span class="o">=</span> <span class="n">resultMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="nc">Salary</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
        <span class="kd">final</span> <span class="nc">Salary</span> <span class="n">salary2</span> <span class="o">=</span> <span class="n">resultMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="nc">Salary</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>

        <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">&gt;</span> <span class="n">latestSalaries</span> <span class="o">=</span> <span class="n">salaryRepository</span><span class="o">.</span><span class="na">findLatestSalaries</span><span class="o">();</span>

        <span class="kd">final</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">latestSalaries</span>
                <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">sal</span> <span class="o">-&gt;</span> <span class="n">sal</span><span class="o">.</span><span class="na">getEmployeeId</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">salary1</span><span class="o">.</span><span class="na">getEmployeeId</span><span class="o">())).</span><span class="na">findFirst</span><span class="o">();</span>

        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">isPresent</span><span class="o">());</span>

        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s">"The salary id should match with latest salary"</span><span class="o">,</span> <span class="n">salary2</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getId</span><span class="o">());</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">salary2</span><span class="o">.</span><span class="na">getSalary</span><span class="o">(),</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getSalary</span><span class="o">());</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">salary2</span><span class="o">.</span><span class="na">getFromDate</span><span class="o">(),</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getFromDate</span><span class="o">());</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">salary2</span><span class="o">.</span><span class="na">getToDate</span><span class="o">(),</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getToDate</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>
<p>And when you run the test it fails</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â””â”€â”€ *ROOT*
    â””â”€â”€ in.kuros.randomjpa.blogexample.entity.Employee|0 [empNo: 10019]
        â”œâ”€â”€ in.kuros.randomjpa.blogexample.entity.Salary|0 [id: 19]
        â””â”€â”€ in.kuros.randomjpa.blogexample.entity.Salary|1 [id: 20]



java.lang.AssertionError: The salary id should match with latest salary 
Expected :20
Actual   :19
 &lt;Click to see difference&gt;


	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at in.kuros.randomjpa.blogexample.repository.SalaryRepositoryTest.shouldTestToFetchLatestSalaryRecordForMultipleEntry(SalaryRepositoryTest.java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
</code></pre></div></div>

<p>So now we have a failing test, but before we move to fixing our query letâ€™s understand the syntax.</p>

<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4166026699724584" data-ad-slot="8512487719"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h2 id="test-breakdown">Test Breakdown</h2>
<p>Our aim was to create two salaries for 1 employee with different date ranges:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">final</span> <span class="nc">ResultMap</span> <span class="n">resultMap</span> <span class="o">=</span> <span class="n">jpaContext</span><span class="o">.</span><span class="na">createAndPersist</span><span class="o">(</span>
                <span class="nc">Entity</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Salary</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">fromDate</span><span class="o">,</span> <span class="n">oldFromDate</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">toDate</span><span class="o">,</span> <span class="n">oldToDate</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">fromDate</span><span class="o">,</span> <span class="n">newFromDate</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">toDate</span><span class="o">,</span> <span class="n">newToDate</span><span class="o">));</span>
</code></pre></div></div>

<p>Here we told random-JPA to create 2 copies of Salary, in the background it determined its parent structure and created two rows Salary object. 
Also you are providing custom values of each attributes you want to override, for entity referenced by index of creation order.</p>

<p>So here we are saying we want to set oldFromDate/oldToDate to Salary row 1 &amp; newFromDate/newToDate to salary row 2.</p>

<p>Simple isnâ€™t it.</p>

<p>checkout the <a href="https://github.com/kuros/random-jpa-example/commit/ba143f36756125c6b7a00b9600b739b4ba7727ac">Commit History</a> on github</p>

<h2 id="time-to-fix-the-test">Time to fix the test</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RepositoryRestResource</span><span class="o">(</span><span class="n">collectionResourceRel</span> <span class="o">=</span> <span class="s">"salary"</span><span class="o">,</span> <span class="n">path</span> <span class="o">=</span> <span class="s">"salary"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">SalaryRepository</span> <span class="kd">extends</span> <span class="nc">PagingAndSortingRepository</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@RestResource</span><span class="o">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">"latest"</span><span class="o">)</span>
    <span class="nd">@Query</span><span class="o">(</span><span class="s">"FROM Salary s WHERE NOT EXISTS (select 1 FROM Salary s2 WHERE s.employeeId = s2.employeeId and s.fromDate &lt; s2.fromDate and s.toDate &lt; s2.toDate) "</span><span class="o">)</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">&gt;</span> <span class="nf">findLatestSalaries</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>You run the test and it passes. <strong>Hurray !!!</strong></p>

<p>checkout the <a href="https://github.com/kuros/random-jpa-example/commit/c4185eabad25089f5f51383837de4e61cdbd0896">Commit History</a> on github</p>

<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4166026699724584" data-ad-slot="8512487719"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h2 id="make-jpacontext-singleton">Make JPAContext Singleton</h2>

<p>Before we end the tutorial, one important thing remaining.</p>

<p>We should make JPAContext as a singleton object since loading the context is an heavy operation as build an internal hierarchy graph and entity mappings.</p>

<p>In this tutorial we will create JPAContext bean.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">com.github.kuros.random.jpa.Database</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.github.kuros.random.jpa.JPAContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.github.kuros.random.jpa.JPAContextFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.persistence.EntityManager</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestConfig</span> <span class="o">{</span>

    <span class="nd">@Autowired</span> <span class="kd">private</span> <span class="nc">EntityManager</span> <span class="n">entityManager</span><span class="o">;</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">JPAContext</span> <span class="nf">createJpaContext</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">JPAContextFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="nc">Database</span><span class="o">.</span><span class="na">MY_SQL</span><span class="o">,</span> <span class="n">entityManager</span><span class="o">).</span><span class="na">generate</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>And modified our test to use autowired JPAContext. Now you made sure you are loading JPAContext only once.</p>

<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4166026699724584" data-ad-slot="8512487719"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h2 id="complete-test">Complete Test</h2>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">in.kuros.randomjpa.blogexample.repository</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.github.kuros.random.jpa.JPAContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.github.kuros.random.jpa.persistor.model.ResultMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.github.kuros.random.jpa.types.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.randomjpa.blogexample.entity.Salary</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">in.kuros.randomjpa.blogexample.entity.Salary_</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Assert</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runner.RunWith</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.test.context.junit4.SpringRunner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.time.LocalDate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Optional</span><span class="o">;</span>

<span class="nd">@RunWith</span><span class="o">(</span><span class="nc">SpringRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@SpringBootTest</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SalaryRepositoryTest</span> <span class="o">{</span>

    <span class="nd">@Autowired</span> <span class="kd">private</span> <span class="nc">JPAContext</span> <span class="n">jpaContext</span><span class="o">;</span>
    <span class="nd">@Autowired</span> <span class="kd">private</span> <span class="nc">SalaryRepository</span> <span class="n">salaryRepository</span><span class="o">;</span>

    <span class="nd">@Test</span> <span class="nd">@Transactional</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldTestForFetchingSalaryRecordForOnlyOneEntry</span><span class="o">()</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="nc">ResultMap</span> <span class="n">resultMap</span> <span class="o">=</span> <span class="n">jpaContext</span><span class="o">.</span><span class="na">createAndPersist</span><span class="o">(</span><span class="nc">Entity</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Salary</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
        <span class="n">resultMap</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>

        <span class="kd">final</span> <span class="nc">Salary</span> <span class="n">salary</span> <span class="o">=</span> <span class="n">resultMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="nc">Salary</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">&gt;</span> <span class="n">latestSalaries</span> <span class="o">=</span> <span class="n">salaryRepository</span><span class="o">.</span><span class="na">findLatestSalaries</span><span class="o">();</span>

        <span class="kd">final</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">latestSalaries</span>
                <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">sal</span> <span class="o">-&gt;</span> <span class="n">sal</span><span class="o">.</span><span class="na">getId</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">salary</span><span class="o">.</span><span class="na">getId</span><span class="o">())).</span><span class="na">findFirst</span><span class="o">();</span>

        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">isPresent</span><span class="o">());</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">salary</span><span class="o">.</span><span class="na">getSalary</span><span class="o">(),</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getSalary</span><span class="o">());</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">salary</span><span class="o">.</span><span class="na">getFromDate</span><span class="o">(),</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getFromDate</span><span class="o">());</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">salary</span><span class="o">.</span><span class="na">getToDate</span><span class="o">(),</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getToDate</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Test</span> <span class="nd">@Transactional</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldTestToFetchLatestSalaryRecordForMultipleEntry</span><span class="o">()</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="nc">LocalDate</span> <span class="n">oldFromDate</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">minusDays</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
        <span class="kd">final</span> <span class="nc">LocalDate</span> <span class="n">oldToDate</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">minusDays</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

        <span class="kd">final</span> <span class="nc">LocalDate</span> <span class="n">newFromDate</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="kd">final</span> <span class="nc">LocalDate</span> <span class="n">newToDate</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">plusDays</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>


        <span class="kd">final</span> <span class="nc">ResultMap</span> <span class="n">resultMap</span> <span class="o">=</span> <span class="n">jpaContext</span><span class="o">.</span><span class="na">createAndPersist</span><span class="o">(</span>
                <span class="nc">Entity</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Salary</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">fromDate</span><span class="o">,</span> <span class="n">oldFromDate</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">toDate</span><span class="o">,</span> <span class="n">oldToDate</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">fromDate</span><span class="o">,</span> <span class="n">newFromDate</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">Salary_</span><span class="o">.</span><span class="na">toDate</span><span class="o">,</span> <span class="n">newToDate</span><span class="o">));</span>

        <span class="n">resultMap</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span> <span class="c1">//just for debugging</span>

        <span class="kd">final</span> <span class="nc">Salary</span> <span class="n">salary1</span> <span class="o">=</span> <span class="n">resultMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="nc">Salary</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
        <span class="kd">final</span> <span class="nc">Salary</span> <span class="n">salary2</span> <span class="o">=</span> <span class="n">resultMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="nc">Salary</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>

        <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">&gt;</span> <span class="n">latestSalaries</span> <span class="o">=</span> <span class="n">salaryRepository</span><span class="o">.</span><span class="na">findLatestSalaries</span><span class="o">();</span>

        <span class="kd">final</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Salary</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">latestSalaries</span>
                <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">sal</span> <span class="o">-&gt;</span> <span class="n">sal</span><span class="o">.</span><span class="na">getEmployeeId</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">salary1</span><span class="o">.</span><span class="na">getEmployeeId</span><span class="o">())).</span><span class="na">findFirst</span><span class="o">();</span>

        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">isPresent</span><span class="o">());</span>

        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s">"The salary id should match with latest salary"</span><span class="o">,</span> <span class="n">salary2</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getId</span><span class="o">());</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">salary2</span><span class="o">.</span><span class="na">getSalary</span><span class="o">(),</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getSalary</span><span class="o">());</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">salary2</span><span class="o">.</span><span class="na">getFromDate</span><span class="o">(),</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getFromDate</span><span class="o">());</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">salary2</span><span class="o">.</span><span class="na">getToDate</span><span class="o">(),</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getToDate</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>checkout the <a href="https://github.com/kuros/random-jpa-example/commit/83efda2d2b9410a662df22c06d8cceb0112804a7">Commit History</a> on github</p>


        <p>If you liked this article, you can <a href="https://www.buymeacoffee.com/kuros.in">buy me a coffee</a></p>

        

      </section>

      <footer class="page__meta">
        
        


  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/random-jpa" class="page__taxonomy-item" rel="tag">random-jpa</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2019-01-20T00:00:00+05:30">January 20, 2019</time></p>


        


<div class="author__scope" itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/images/about/myphoto.png" alt="Kumar Rohit" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <div class="author__written">WRITTEN BY</div>
    
      <h3 class="author__name" itemprop="name">Kumar Rohit</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>I like long drives, bike trip &amp; good food. I have passion for coding, especially for Clean-Code.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">India</span>
        </li>
      

      
        
          
            <li><a href="https://www.linkedin.com/in/kumar-rohit-9a985517/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://twitter.com/incrv83" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
            <li><a href="https://github.com/kuros" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>
 
      </footer>

      

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Random-JPA+Integration+%28Contd.%29%20https%3A%2F%2Fkuros.in%2Frandom-jpa%2Frjpa-2-integration%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fkuros.in%2Frandom-jpa%2Frjpa-2-integration%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fkuros.in%2Frandom-jpa%2Frjpa-2-integration%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/random-jpa/custom_dependecy/" class="pagination--pager" title="Adding custom dependency in Random-JPA
">Previous</a>
    
    
      <a href="/random-jpa/rjpa-1-integration/" class="pagination--pager" title="Random-JPA Integration
">Next</a>
    
  </nav>

    </div>
    
    <div class="page__ads__related">
      


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- horizontal - responsive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4166026699724584"
     data-ad-slot="7276848543"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Leave a comment</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>  

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/aws/terraform/fix-lambda-function-url-on-localstack/" rel="permalink">Fix error for lambda function url in localstack
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Spent more than half a day, struggled with this error when I was testing an async lambda on my local.

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/aws/terraform/test-lambda-events-locally-using-localstack/" rel="permalink">Testing lambda &amp; sqs integration locally using localstack
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Running serverless is fun, cost-effective and scalable especially if your application is still growing.
But at the same time I found testing lambdas locally ...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/docker/docker-jekyll-container-to-serve-locally/" rel="permalink">Create Docker Container to Run Jekyll
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">I always faced issues when running jekyll locally, my blog uses jekyll to generate static pages, but every time my os is upgraded or I change my laptop, I al...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/nestjs/deploy-nestjs-application-on-aws-lambda/" rel="permalink">Deploy NestJS application on AWS Lambda
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Lets go serverless, in todays world deploying an application might just cost you cents, you can run a full fledged application for less than $1 a year if you...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
  
</div>

<div class="page">
  


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- horizontal - responsive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4166026699724584"
     data-ad-slot="7276848543"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/incrv83" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/kuros" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Kuros.in. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-131802948-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-131802948-1', { 'anonymize_ip': false});
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://kuros.in/random-jpa/rjpa-2-integration/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/random-jpa/rjpa-2-integration"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://kuros-in.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  



  
    <script src="/assets/js/custom.js"></script>
  



  </body>
</html>
